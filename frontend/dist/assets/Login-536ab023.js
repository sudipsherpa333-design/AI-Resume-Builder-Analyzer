import{r as c,u as U,b as H,c as q,j as e,a as o,m as s,L as y,F as D,z as r}from"./index-341ba9ec.js";import{F as Y}from"./index.esm-00398fc9.js";import{F as M,a as W,b as V,c as Q,d as J}from"./index.esm-45b297a2.js";const ae=()=>{const[d,C]=c.useState({email:"",password:""}),[x,E]=c.useState(!1),[n,h]=c.useState(!1),[b,m]=c.useState({google:!1,facebook:!1}),[P,_]=c.useState(!1),{login:A,socialLogin:w,demoLogin:L,isAuthenticated:v}=U(),u=H(),N=q(),G=()=>{var i,f;const a=new URLSearchParams(N.search).get("redirect");return((f=(i=N.state)==null?void 0:i.from)==null?void 0:f.pathname)||a||"/"},[p,X]=c.useState(G());c.useEffect(()=>{v&&u(p,{replace:!0})},[v,p,u]),c.useEffect(()=>((()=>{if(window.google)return;const a=document.createElement("script");a.src="https://accounts.google.com/gsi/client",a.async=!0,a.defer=!0,a.onload=R,document.head.appendChild(a)})(),()=>{const a=document.querySelector('script[src="https://accounts.google.com/gsi/client"]');a&&document.head.removeChild(a)}),[]);const R=()=>{if(window.google)try{window.google.accounts.id.initialize({client_id:"35584631622-mkusp15h0p56not7i0eoo77apkhm1ca4.apps.googleusercontent.com",callback:O,auto_select:!1}),console.log("‚úÖ Google SDK initialized")}catch(t){console.error("‚ùå Failed to initialize Google Auth:",t)}},O=async t=>{m(a=>({...a,google:!0}));try{const a={token:t.credential,provider:"google"},i=await w("google",a);i.success?(r.success("üéâ Successfully logged in with Google!"),u(p,{replace:!0})):r.error(i.message||"Google login failed")}catch(a){console.error("‚ùå Google login error:",a),r.error("Google login failed. Please try again.")}finally{m(a=>({...a,google:!1}))}},B=()=>{if(window.google)try{window.google.accounts.id.prompt(t=>{if(t.isNotDisplayed()||t.isSkippedMoment()){const a=document.getElementById("googleButtonContainer");a&&window.google.accounts.id.renderButton(a,{theme:"outline",size:"large",width:"100%",text:"continue_with"})}})}catch(t){console.error("Google prompt error:",t),r.error("Google sign-in is not available. Please try again.")}else r.error("Google sign-in is loading. Please try again in a moment.")};c.useEffect(()=>((()=>{if(window.FB)return;const a=document.createElement("script");a.async=!0,a.defer=!0,a.crossOrigin="anonymous",a.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0&appId=YOUR_FACEBOOK_APP_ID_HERE",a.onload=z,document.head.appendChild(a)})(),()=>{const a=document.querySelector('script[src*="facebook"]');a&&document.head.removeChild(a)}),[]);const z=()=>{if(window.FB)try{window.FB.init({appId:"YOUR_FACEBOOK_APP_ID_HERE",xfbml:!0,version:"v18.0"}),console.log("‚úÖ Facebook SDK initialized")}catch(t){console.error("‚ùå Failed to initialize Facebook Auth:",t)}},j=async()=>{m(t=>({...t,facebook:!0}));try{if(!window.FB){r.error("Facebook SDK is not loaded. Please try again."),m(t=>({...t,facebook:!1}));return}window.FB.login(async t=>{if(t.authResponse){const a=t.authResponse.accessToken;window.FB.api("/me",{fields:"id,name,email,picture"},async i=>{var F,S;const f={token:a,provider:"facebook",userData:{id:i.id,name:i.name,email:i.email,picture:(S=(F=i.picture)==null?void 0:F.data)==null?void 0:S.url}};try{const g=await w("facebook",f);g.success?(r.success("üéâ Successfully logged in with Facebook!"),u(p,{replace:!0})):r.error(g.message||"Facebook login failed")}catch(g){console.error("‚ùå Facebook login error:",g),r.error("Facebook login failed. Please try again.")}finally{m(g=>({...g,facebook:!1}))}})}else console.log("User cancelled Facebook login or did not fully authorize."),m(a=>({...a,facebook:!1}))},{scope:"public_profile,email"})}catch(t){console.error("‚ùå Facebook login error:",t),r.error("Facebook login failed. Please try again."),m(a=>({...a,facebook:!1}))}},k=t=>{C(a=>({...a,[t.target.name]:t.target.value}))},K=async t=>{var a;if(t.preventDefault(),!d.email||!d.password){r.error("Please fill in all fields");return}if(d.email!=="airesume100"&&!/\S+@\S+\.\S+/.test(d.email)){r.error("Please enter a valid email address");return}h(!0);try{const i=await A(d.email,d.password);i.success?(r.success("üéâ Welcome back!"),((a=i.user)==null?void 0:a.role)==="admin"?(r.success("üëÆ Redirecting to Admin Dashboard..."),setTimeout(()=>{window.location.href="http://localhost:5174"},1e3)):u("/dashboard",{replace:!0})):r.error(i.message||"Login failed")}catch(i){console.error("‚ùå Login error:",i),r.error("An unexpected error occurred. Please try again.")}finally{h(!1)}},I=async()=>{h(!0);try{r.loading("Attempting demo login...",{duration:2e3});const t=await L();t.success?(r.success("üöÄ Welcome to Demo Account! Redirecting to dashboard..."),setTimeout(()=>u("/dashboard",{replace:!0}),500)):(r.error(t.message||"‚ùå Demo account not available. Please check your connection."),console.log("Demo login failed:",t.message))}catch(t){console.error("‚ùå Demo login error:",t),r.error("Demo login failed. Please check your connection and try again.")}finally{h(!1)}},T={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6,staggerChildren:.1}}},l={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return e("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:o(s.div,{className:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",variants:T,initial:"hidden",animate:"visible",children:[o(s.div,{className:"hidden lg:flex flex-col items-center justify-center text-center p-8",variants:l,children:[e(s.div,{className:"text-6xl mb-6",animate:{y:[0,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"üëã"}),e(s.h1,{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",variants:l,children:"Welcome Back"}),e(s.p,{className:"text-xl text-gray-600 mb-8",variants:l,children:"Continue building amazing resumes"}),e(s.div,{className:"space-y-4 text-left max-w-sm",variants:l,children:[{icon:"üöÄ",text:"Pick up where you left off"},{icon:"üìä",text:"Access your resume analytics"},{icon:"üé®",text:"Edit your existing templates"},{icon:"üì•",text:"Download your resumes instantly"}].map((t,a)=>o(s.div,{className:"flex items-center space-x-3 text-gray-700 text-lg",variants:l,custom:a,children:[e("span",{className:"text-2xl flex-shrink-0",children:t.icon}),e("span",{children:t.text})]},t.text))})]}),o(s.div,{className:"bg-white rounded-2xl shadow-xl p-6 lg:p-8 border border-gray-100 w-full max-w-md mx-auto",variants:l,children:[o(s.div,{className:"text-center mb-8",variants:l,children:[e("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"Sign In"}),e("p",{className:"text-gray-600",children:"Sign in to your account to continue"})]}),e(s.button,{onClick:I,disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 px-4 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none mb-4",variants:l,whileHover:n?{}:{scale:1.02},whileTap:n?{}:{scale:.98},children:n?o("div",{className:"flex items-center justify-center space-x-2",children:[e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e("span",{children:"Signing in..."})]}):"üé¨ Try Demo Account"}),o("div",{className:"my-4 flex items-center",children:[e("div",{className:"flex-1 border-t border-gray-300"}),e("span",{className:"px-4 text-sm text-gray-500",children:"Or sign in with account"}),e("div",{className:"flex-1 border-t border-gray-300"})]}),o("form",{onSubmit:K,className:"space-y-4",children:[o(s.div,{variants:l,children:[e("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address or Admin Username"}),o("div",{className:"relative",children:[e(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e("input",{type:"text",id:"email",name:"email",value:d.email,onChange:k,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm placeholder-gray-400",placeholder:"your@email.com or username",disabled:n})]})]}),o(s.div,{variants:l,children:[e("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o("div",{className:"relative",children:[e(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),e("input",{type:x?"text":"password",id:"password",name:"password",value:d.password,onChange:k,required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm placeholder-gray-400",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",disabled:n}),e("button",{type:"button",onClick:()=>E(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",disabled:n,children:x?e(V,{size:16}):e(Q,{size:16})})]})]}),o(s.div,{className:"flex items-center justify-between",variants:l,children:[o("div",{className:"flex items-center",children:[e("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:P,onChange:t=>_(t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:n}),e("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e(y,{to:"/forgot-password",className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Forgot password?"})]}),e(s.button,{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none mt-2",variants:l,whileHover:n?{}:{scale:1.02},whileTap:n?{}:{scale:.98},children:n?o("div",{className:"flex items-center justify-center space-x-2",children:[e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e("span",{children:"Signing in..."})]}):"Sign in to your account"})]}),o(s.div,{className:"my-6 flex items-center",variants:l,children:[e("div",{className:"flex-1 border-t border-gray-300"}),e("span",{className:"px-4 text-sm text-gray-500",children:"Or continue with"}),e("div",{className:"flex-1 border-t border-gray-300"})]}),o(s.div,{className:"space-y-3",variants:l,children:[e("div",{id:"googleButtonContainer",className:"w-full flex justify-center"}),e("button",{onClick:B,disabled:b.google||n,className:"w-full flex items-center justify-center space-x-3 py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:b.google?o("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e("span",{children:"Connecting..."})]}):o(D,{children:[e(Y,{className:"text-xl"}),e("span",{children:"Continue with Google"})]})}),e("button",{onClick:j,disabled:b.facebook||n,className:"w-full flex items-center justify-center space-x-3 py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:b.facebook?o("div",{className:"flex items-center space-x-2",children:[e("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e("span",{children:"Connecting..."})]}):o(D,{children:[e(J,{className:"text-xl text-blue-600"}),e("span",{children:"Continue with Facebook"})]})})]}),o(s.div,{className:"text-center mt-8 pt-6 border-t border-gray-200",variants:l,children:[o("p",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",e(y,{to:"/register",className:"font-semibold text-blue-600 hover:text-blue-500 transition-colors",children:"Create account"})]}),e(y,{to:"/",className:"inline-block mt-4 text-sm text-gray-500 hover:text-gray-700 transition-colors hover:underline",children:"‚Üê Back to Home"})]})]})]})})};export{ae as default};
//# sourceMappingURL=Login-536ab023.js.map
