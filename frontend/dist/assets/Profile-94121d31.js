import{u as _,b as ee,r as o,j as e,a as t,m as s,F as y,z as c,k as te}from"./index-341ba9ec.js";import{u as S,e as ae,F as re,v as ie,w as se,x as le,a as I,b as E,c as F,y as ne,z as oe,A as ce}from"./index.esm-45b297a2.js";const fe=()=>{var L;const{user:r,updateProfile:z,changePassword:B,logout:M,isAuthenticated:A,isLoading:j}=_(),x=ee(),b=o.useRef(null),[g,q]=o.useState("profile"),[m,w]=o.useState(!1),[N,G]=o.useState(""),[n,v]=o.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",profilePicture:(r==null?void 0:r.profilePicture)||"",bio:(r==null?void 0:r.bio)||""}),[de,W]=o.useState(null),[H,me]=o.useState(!!(r!=null&&r.isEmailVerified||r!=null&&r.emailVerified||r!=null&&r.verified)),[R,V]=o.useState(!1),[l,D]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,P]=o.useState({current:!1,new:!1,confirm:!1}),[T,U]=o.useState(!1),[$,O]=o.useState({emailNotifications:!0,marketingEmails:!1,weeklyDigest:!0,resumeReminders:!0}),h=a=>{const{name:i,value:d}=a.target;v(f=>({...f,[i]:d}))},Z=a=>{const i=a.target.files&&a.target.files[0];if(!i)return;W(i);const d=new FileReader;d.onload=f=>{v(Y=>({...Y,profilePicture:f.target.result}))},d.readAsDataURL(i)},J=async()=>{var a;V(!0);try{await te.post("/auth/verify/send",{email:n.email}),c.success("Verification email sent â€” check your inbox")}catch(i){console.warn("Verification send failed",((a=i==null?void 0:i.response)==null?void 0:a.data)||i.message),c("Verification request submitted (if backend supports it)")}finally{V(!1)}},K=async a=>{a.preventDefault();try{const i={...n},d=await z(i);d.success?(c.success("âœ… Profile updated successfully!"),w(!1),G("Profile updated successfully!")):c.error(d.message||"Failed to update profile")}catch(i){console.error("Profile update error:",i),c.error("Error updating profile")}},C=a=>{const{name:i,value:d}=a.target;D(f=>({...f,[i]:d}))},Q=async a=>{if(a.preventDefault(),!l.currentPassword||!l.newPassword||!l.confirmPassword){c.error("Please fill in all password fields");return}if(l.newPassword!==l.confirmPassword){c.error("New passwords do not match");return}if(l.newPassword.length<8){c.error("New password must be at least 8 characters");return}U(!0);try{const i=await B({currentPassword:l.currentPassword,newPassword:l.newPassword});i.success?(c.success("âœ… Password changed successfully!"),D({currentPassword:"",newPassword:"",confirmPassword:""})):c.error(i.message||"Failed to change password")}catch(i){console.error("Password change error:",i),c.error("Error changing password")}finally{U(!1)}},X=a=>{navigator.clipboard.writeText(a),c.success("Copied to clipboard!")},p=(a=>{let i=0;return a.length>=8&&i++,a.length>=12&&i++,/[A-Z]/.test(a)&&i++,/[a-z]/.test(a)&&i++,/\d/.test(a)&&i++,/[!@#$%^&*]/.test(a)&&i++,i})(l.newPassword)/6*100,k=p<33?"bg-red-500":p<66?"bg-yellow-500":"bg-green-500";return r?(o.useEffect(()=>{!j&&!A&&x("/login",{replace:!0})},[A,j,x]),e("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12",children:t("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[t(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Account Settings"}),e("p",{className:"text-gray-600",children:"Manage your profile and security preferences"})]}),t("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:t("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 lg:sticky lg:top-8",children:[t("div",{className:"text-center mb-6",children:[t("div",{className:"w-20 h-20 sm:w-32 sm:h-32 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-4xl font-bold overflow-hidden relative",children:[n.profilePicture||r.profilePicture?e("img",{src:n.profilePicture||r.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):(L=r.name)==null?void 0:L.charAt(0).toUpperCase(),e("input",{ref:b,type:"file",accept:"image/*",onChange:Z,style:{display:"none"}})]}),e("h2",{className:"text-2xl font-bold text-gray-900",children:r.name}),e("p",{className:"text-gray-600 text-sm mt-1 break-all",children:r.email}),e("div",{className:"mt-2",children:H?t("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold",children:[e(S,{className:"mr-1"})," Email verified"]}):e("button",{type:"button",onClick:J,disabled:R,className:"px-3 py-1 bg-yellow-400 text-white rounded-md text-sm hover:bg-yellow-500",children:R?"Sending...":"Verify Email"})}),m&&e("div",{className:"mt-3",children:e("button",{type:"button",onClick:()=>b.current&&b.current.click(),className:"px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 w-full sm:w-auto",children:"Upload Avatar"})})]}),t("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[t("div",{className:"flex items-center justify-between text-sm",children:[e("span",{className:"text-gray-600",children:"Account Type"}),e("span",{className:"font-semibold text-blue-600",children:r.authProvider||"Local"})]}),t("div",{className:"flex items-center justify-between text-sm",children:[e("span",{className:"text-gray-600",children:"Status"}),t("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-semibold",children:[e(S,{className:"mr-1"})," Active"]})]})]}),e("div",{className:"space-y-2",children:[{id:"profile",label:"Profile",icon:"ðŸ‘¤"},{id:"security",label:"Security",icon:"ðŸ”’"},{id:"preferences",label:"Preferences",icon:"âš™ï¸"}].map(a=>t("button",{onClick:()=>q(a.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ${g===a.id?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:[e("span",{className:"mr-2",children:a.icon}),a.label]},a.id))}),e("button",{onClick:()=>{M(),x("/")},className:"w-full mt-6 px-4 py-3 bg-red-50 text-red-600 font-semibold rounded-lg hover:bg-red-100 transition-all duration-200",children:"Sign Out"})]})}),t(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"lg:col-span-3",children:[g==="profile"&&t("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[t("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e("h3",{className:"text-2xl font-bold text-gray-900",children:"Profile Information"}),!m&&e("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold w-full sm:w-auto text-center",children:"Edit Profile"})]}),N&&e(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-4 rounded-lg mb-6 ${N.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:N}),t("form",{onSubmit:K,className:"space-y-6",children:[t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[t("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e(ae,{className:"inline mr-2 text-blue-600"}),"Full Name"]}),m?e("input",{type:"text",name:"name",value:n.name,onChange:h,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Enter your name"}):e("p",{className:"text-gray-900 py-3",children:n.name})]}),t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[t("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e(re,{className:"inline mr-2 text-blue-600"}),"Email Address"]}),m?e("input",{type:"email",name:"email",value:n.email,onChange:h,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Enter your email"}):t("div",{className:"flex items-center justify-between py-3",children:[e("p",{className:"text-gray-900",children:n.email}),e("button",{type:"button",onClick:()=>X(n.email),className:"text-blue-600 hover:text-blue-700",children:e(ie,{})})]})]}),t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio / About"}),m?e("textarea",{name:"bio",value:n.bio,onChange:h,rows:"4",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tell us about yourself..."}):e("p",{className:"text-gray-900 py-3",children:n.bio||"No bio added yet"})]}),t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[t("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e(se,{className:"inline mr-2 text-blue-600"}),"Profile Picture URL"]}),m?t("div",{className:"flex gap-3 items-center",children:[e("input",{type:"url",name:"profilePicture",value:n.profilePicture,onChange:h,className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Enter image URL"}),e("button",{type:"button",onClick:()=>b.current&&b.current.click(),className:"px-3 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700",children:"Upload"})]}):e("p",{className:"text-gray-900 py-3 break-all",children:n.profilePicture||"No profile picture set"})]}),m&&t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row gap-3 pt-4 w-full",children:[t("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center w-full sm:w-auto justify-center",children:[e(le,{className:"mr-2"}),"Save Changes"]}),e("button",{type:"button",onClick:()=>{w(!1),v({name:r.name,email:r.email,profilePicture:r.profilePicture||"",bio:r.bio||""})},className:"px-6 py-3 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition-colors font-semibold w-full sm:w-auto",children:"Cancel"})]})]})]}),g==="security"&&t("div",{className:"space-y-6",children:[t("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[t("h3",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[e(I,{className:"mr-3 text-blue-600"}),"Change Password"]}),t("form",{onSubmit:Q,className:"space-y-6",children:[t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),t("div",{className:"relative",children:[e("input",{type:u.current?"text":"password",name:"currentPassword",value:l.currentPassword,onChange:C,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all pr-12",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e("button",{type:"button",onClick:()=>P(a=>({...a,current:!a.current})),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:u.current?e(E,{}):e(F,{})})]})]}),t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),t("div",{className:"relative",children:[e("input",{type:u.new?"text":"password",name:"newPassword",value:l.newPassword,onChange:C,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all pr-12",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e("button",{type:"button",onClick:()=>P(a=>({...a,new:!a.new})),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:u.new?e(E,{}):e(F,{})})]}),l.newPassword&&t(s.div,{className:"mt-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[t("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-xs font-semibold text-gray-600",children:"Strength"}),e("span",{className:`text-xs font-semibold ${k==="bg-red-500"?"text-red-600":k==="bg-yellow-500"?"text-yellow-600":"text-green-600"}`,children:p<33?"Weak":p<66?"Fair":"Strong"})]}),e("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e(s.div,{className:`h-2 rounded-full ${k}`,initial:{width:0},animate:{width:`${p}%`},transition:{duration:.3}})})]})]}),t(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),t("div",{className:"relative",children:[e("input",{type:u.confirm?"text":"password",name:"confirmPassword",value:l.confirmPassword,onChange:C,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all pr-12",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e("button",{type:"button",onClick:()=>P(a=>({...a,confirm:!a.confirm})),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:u.confirm?e(E,{}):e(F,{})})]}),l.confirmPassword&&e(s.p,{className:`text-xs mt-2 flex items-center ${l.newPassword===l.confirmPassword?"text-green-600":"text-red-600"}`,initial:{opacity:0},animate:{opacity:1},children:l.newPassword===l.confirmPassword?t(y,{children:[e(S,{className:"mr-1"})," Passwords match"]}):t(y,{children:[e(ne,{className:"mr-1"})," Passwords do not match"]})})]}),e(s.button,{type:"submit",disabled:T,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center disabled:opacity-50 disabled:cursor-not-allowed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:T?t(y,{children:[e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Changing..."]}):t(y,{children:[e(I,{className:"mr-2"}),"Change Password"]})})]})]}),t("div",{className:"bg-blue-50 rounded-2xl border-2 border-blue-200 p-6",children:[t("h4",{className:"font-bold text-blue-900 mb-4 flex items-center",children:[e(oe,{className:"mr-2"}),"Security Tips"]}),t("ul",{className:"space-y-2 text-blue-900 text-sm",children:[e("li",{children:"â€¢ Change your password regularly (every 3 months)"}),e("li",{children:"â€¢ Use a strong, unique password with mixed characters"}),e("li",{children:"â€¢ Never share your password with anyone"}),e("li",{children:"â€¢ Sign out when using public computers"})]})]})]}),g==="preferences"&&t("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[t("h3",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[e(ce,{className:"mr-3 text-blue-600"}),"Notification Preferences"]}),e("div",{className:"space-y-4",children:[{id:"emailNotifications",title:"Email Notifications",description:"Receive email updates about your account activity"},{id:"marketingEmails",title:"Marketing Emails",description:"Receive promotions, new features, and product updates"},{id:"weeklyDigest",title:"Weekly Digest",description:"Get a weekly summary of your activity"},{id:"resumeReminders",title:"Resume Reminders",description:"Get reminded to update your resumes"}].map(a=>t(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[t("div",{children:[e("h4",{className:"font-semibold text-gray-900",children:a.title}),e("p",{className:"text-sm text-gray-600",children:a.description})]}),e("button",{onClick:()=>O(i=>({...i,[a.id]:!i[a.id]})),className:`relative w-14 h-8 rounded-full transition-colors ${$[a.id]?"bg-blue-600":"bg-gray-300"}`,children:e(s.div,{className:"absolute w-7 h-7 bg-white rounded-full top-0.5",animate:{left:$[a.id]?"26px":"3px"},transition:{duration:.2}})})]},a.id))}),e(s.button,{onClick:()=>c.success("Preferences saved!"),className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Save Preferences"})]})]})]})]})})):e("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:t("div",{className:"text-center",children:[e("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e("p",{className:"text-gray-600",children:"Loading profile..."})]})})};export{fe as default};
//# sourceMappingURL=Profile-94121d31.js.map
